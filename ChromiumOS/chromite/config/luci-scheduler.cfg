# Defines buckets on luci-scheduler.appspot.com.
#
# For schema of this file and documentation see ProjectConfig message in
# https://github.com/luci/luci-go/blob/HEAD/scheduler/appengine/messages/config.proto

# Generated with chromite/scripts/gen_luci_scheduler

# Autodeployed with:
# https://data.corp.google.com/sites/chromeos_ci_cros_ci_builds/utility/?f=board_name:in:luci-scheduler-updater

acl_sets {
  name: "default"
  acls {
    role: READER
    granted_to: "group:googlers"
  }
  acls {
    role: OWNER
    granted_to: "group:project-chromeos-admins"
  }
  acls {
    role: TRIGGERER
    granted_to: "group:mdb/chromeos-build-access"
  }
  acls {
    role: TRIGGERER
    granted_to: "group:project-chromeos-buildbucket-schedulers"
  }
}

trigger {
  id: "trigger_0"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 5m interval"
  gitiles: {
    repo: "https://chrome-internal.googlesource.com/chromeos/infra/config"
    refs: "refs/heads/main"
    path_regexps: "generated/luci-scheduler.cfg"
  }
  triggers: "luci-scheduler-updater"
}

trigger {
  id: "trigger_1"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 5m interval"
  gitiles: {
    repo: "https://chromium.googlesource.com/chromiumos/chromite"
    refs: "refs/heads/main"
    path_regexps: "config/luci-scheduler.cfg"
  }
  triggers: "luci-scheduler-updater"
}

job {
  id: "config-updater"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "@hourly"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Infra"
    tags: "cbb_branch:main"
    tags: "cbb_config:config-updater"
    tags: "cbb_display_label:utility"
    properties: "cbb_branch:main"
    properties: "cbb_config:config-updater"
    properties: "cbb_display_label:utility"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "factory-excelsior-12812.B-buildspec"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 168h interval"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Factory"
    tags: "cbb_branch:main"
    tags: "cbb_config:factory-excelsior-12812.B-buildspec"
    tags: "cbb_display_label:factory"
    tags: "cbb_workspace_branch:factory-excelsior-12812.B"
    properties: "cbb_branch:main"
    properties: "cbb_config:factory-excelsior-12812.B-buildspec"
    properties: "cbb_display_label:factory"
    properties: "cbb_workspace_branch:factory-excelsior-12812.B"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "factory-hatch-12692.B-buildspec"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 168h interval"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Factory"
    tags: "cbb_branch:main"
    tags: "cbb_config:factory-hatch-12692.B-buildspec"
    tags: "cbb_display_label:factory"
    tags: "cbb_workspace_branch:factory-hatch-12692.B"
    properties: "cbb_branch:main"
    properties: "cbb_config:factory-hatch-12692.B-buildspec"
    properties: "cbb_display_label:factory"
    properties: "cbb_workspace_branch:factory-hatch-12692.B"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "factory-kukui-12587.B-buildspec"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 168h interval"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Factory"
    tags: "cbb_branch:main"
    tags: "cbb_config:factory-kukui-12587.B-buildspec"
    tags: "cbb_display_label:factory"
    tags: "cbb_workspace_branch:factory-kukui-12587.B"
    properties: "cbb_branch:main"
    properties: "cbb_config:factory-kukui-12587.B-buildspec"
    properties: "cbb_display_label:factory"
    properties: "cbb_workspace_branch:factory-kukui-12587.B"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "factory-octopus-11512.B-buildspec"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "with 168h interval"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Factory"
    tags: "cbb_branch:main"
    tags: "cbb_config:factory-octopus-11512.B-buildspec"
    tags: "cbb_display_label:factory"
    tags: "cbb_workspace_branch:factory-octopus-11512.B"
    properties: "cbb_branch:main"
    properties: "cbb_config:factory-octopus-11512.B-buildspec"
    properties: "cbb_display_label:factory"
    properties: "cbb_workspace_branch:factory-octopus-11512.B"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "luci-scheduler-updater"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "triggered"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "Infra"
    tags: "cbb_branch:main"
    tags: "cbb_config:luci-scheduler-updater"
    tags: "cbb_display_label:utility"
    properties: "cbb_branch:main"
    properties: "cbb_config:luci-scheduler-updater"
    properties: "cbb_display_label:utility"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}

job {
  id: "master-release"
  realm: "cbb-jobs"
  acl_sets: "default"
  schedule: "  0 12 * * *"
  buildbucket: {
    server: "cr-buildbucket.appspot.com"
    bucket: "general"
    builder: "LegacyRelease"
    tags: "cbb_branch:main"
    tags: "cbb_config:master-release"
    tags: "cbb_display_label:release"
    properties: "cbb_branch:main"
    properties: "cbb_config:master-release"
    properties: "cbb_display_label:release"
    properties: "cbb_extra_args:[\"--buildbot\"]"
  }
}
